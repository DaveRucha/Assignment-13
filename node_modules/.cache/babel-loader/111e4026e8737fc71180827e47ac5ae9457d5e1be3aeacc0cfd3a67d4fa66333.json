{"ast":null,"code":"var _jsxFileName = \"C:\\\\SDSU\\\\Web\\\\Assignment-13\\\\src\\\\Products.js\";\nimport React, { Component } from 'react';\nimport Filters from './Filters';\nimport ProductTable from './ProductTable';\nimport ProductForm from './ProductForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RESET_VALUES = {\n  productid: '',\n  category: '',\n  price: '',\n  name: '',\n  instock: false\n};\nclass Products extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: '',\n      products: {},\n      currentProduct: {\n        id: '',\n        product: Object.assign({}, RESET_VALUES)\n      },\n      error: null\n    };\n    this.handleFilter = this.handleFilter.bind(this);\n    this.handleDestroy = this.handleDestroy.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.fetchProducts = this.fetchProducts.bind(this);\n  }\n  componentDidMount() {\n    this.fetchProducts();\n  }\n  async fetchProducts() {\n    try {\n      const res = await fetch('http://localhost:3003/product/get');\n      const result = await res.json();\n      this.setState({\n        filterText: '',\n        products: result,\n        currentProduct: {\n          id: '',\n          product: Object.assign({}, RESET_VALUES)\n        },\n        error: null\n      });\n    } catch (error) {\n      console.error(error);\n      this.setState({\n        error\n      });\n    }\n  }\n  handleFilter(filterInput) {\n    this.setState(filterInput);\n  }\n  handleUpdate(product) {\n    const clone = {\n      id: product.id,\n      product: {\n        ...product.product\n      }\n    };\n    this.setState({\n      currentProduct: clone\n    });\n  }\n  async handleSave(product) {\n    const isNew = !product.id;\n    let endpoint = 'http://localhost:3003/product/create';\n    let method = 'POST';\n    if (!isNew) {\n      endpoint = `http://localhost:3003/product/update/${product.id}`;\n      method = 'PUT';\n    }\n    try {\n      const res = await fetch(endpoint, {\n        method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(product)\n      });\n      const updatedProducts = await res.json();\n      this.setState({\n        products: updatedProducts,\n        currentProduct: {\n          id: '',\n          product: Object.assign({}, RESET_VALUES)\n        },\n        error: null\n      });\n    } catch (error) {\n      console.error(error);\n      this.setState({\n        error\n      });\n    }\n  }\n  async handleDestroy(productId) {\n    try {\n      const res = await fetch(`http://localhost:3003/product/delete/${productId}`, {\n        method: 'DELETE'\n      });\n      const updatedProducts = await res.json();\n      this.setState({\n        products: updatedProducts,\n        currentProduct: {\n          id: '',\n          product: Object.assign({}, RESET_VALUES)\n        },\n        error: null\n      });\n    } catch (error) {\n      console.error(error);\n      this.setState({\n        error\n      });\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Inventory\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Filters, {\n        onFilter: this.handleFilter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProductTable, {\n        products: this.state.products,\n        filterText: this.state.filterText,\n        onDestroy: this.handleDestroy,\n        onEdit: this.handleUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProductForm, {\n        onSave: this.handleSave,\n        product: this.state.currentProduct\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), this.state.error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger mt-2\",\n        children: this.state.error.message || 'Something went wrong'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Products;","map":{"version":3,"names":["React","Component","Filters","ProductTable","ProductForm","jsxDEV","_jsxDEV","RESET_VALUES","productid","category","price","name","instock","Products","constructor","props","state","filterText","products","currentProduct","id","product","Object","assign","error","handleFilter","bind","handleDestroy","handleSave","handleUpdate","fetchProducts","componentDidMount","res","fetch","result","json","setState","console","filterInput","clone","isNew","endpoint","method","headers","body","JSON","stringify","updatedProducts","productId","render","children","fileName","_jsxFileName","lineNumber","columnNumber","onFilter","onDestroy","onEdit","onSave","className","message"],"sources":["C:/SDSU/Web/Assignment-13/src/Products.js"],"sourcesContent":["import React, { Component } from 'react';\nimport Filters from './Filters';\nimport ProductTable from './ProductTable';\nimport ProductForm from './ProductForm';\n\nconst RESET_VALUES = { productid: '', category: '', price: '', name: '', instock: false };\n\nclass Products extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: '',\n      products: {},\n      currentProduct: {\n        id: '',\n        product: Object.assign({}, RESET_VALUES),\n      },\n      error: null,\n    };\n\n    this.handleFilter = this.handleFilter.bind(this);\n    this.handleDestroy = this.handleDestroy.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.fetchProducts = this.fetchProducts.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchProducts();\n  }\n\n  async fetchProducts() {\n    try {\n      const res = await fetch('http://localhost:3003/product/get');\n      const result = await res.json();\n      this.setState({\n        filterText: '',\n        products: result,\n        currentProduct: {\n          id: '',\n          product: Object.assign({}, RESET_VALUES),\n        },\n        error: null,\n      });\n    } catch (error) {\n      console.error(error);\n      this.setState({ error });\n    }\n  }\n\n  handleFilter(filterInput) {\n    this.setState(filterInput);\n  }\n\n  handleUpdate(product) {\n    const clone = {\n      id: product.id,\n      product: { ...product.product },\n    };\n    this.setState({ currentProduct: clone });\n  }\n\n  async handleSave(product) {\n    const isNew = !product.id;\n    let endpoint = 'http://localhost:3003/product/create';\n    let method = 'POST';\n\n    if (!isNew) {\n      endpoint = `http://localhost:3003/product/update/${product.id}`;\n      method = 'PUT';\n    }\n\n    try {\n      const res = await fetch(endpoint, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(product),\n      });\n\n      const updatedProducts = await res.json();\n\n      this.setState({\n        products: updatedProducts,\n        currentProduct: {\n          id: '',\n          product: Object.assign({}, RESET_VALUES),\n        },\n        error: null,\n      });\n    } catch (error) {\n      console.error(error);\n      this.setState({ error });\n    }\n  }\n\n  async handleDestroy(productId) {\n    try {\n      const res = await fetch(`http://localhost:3003/product/delete/${productId}`, {\n        method: 'DELETE',\n      });\n\n      const updatedProducts = await res.json();\n\n      this.setState({\n        products: updatedProducts,\n        currentProduct: {\n          id: '',\n          product: Object.assign({}, RESET_VALUES),\n        },\n        error: null,\n      });\n    } catch (error) {\n      console.error(error);\n      this.setState({ error });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <h1>My Inventory</h1>\n\n        <Filters onFilter={this.handleFilter} />\n\n        <ProductTable\n          products={this.state.products}\n          filterText={this.state.filterText}\n          onDestroy={this.handleDestroy}\n          onEdit={this.handleUpdate}\n        />\n\n        <ProductForm\n          onSave={this.handleSave}\n          product={this.state.currentProduct}\n        />\n\n        {this.state.error && (\n          <div className=\"alert alert-danger mt-2\">\n            {this.state.error.message || 'Something went wrong'}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Products;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}